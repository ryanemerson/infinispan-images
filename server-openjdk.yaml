name: infinispan/server
version: 14.0.0.CR1-1
description: Infinispan Server
from: registry.access.redhat.com/ubi8/openjdk-17-runtime
artifacts:
- name: server
  url: https://downloads.jboss.org/infinispan/14.0.0.CR1/infinispan-server-14.0.0.CR1.zip
packages:
  manager: microdnf
ports:
- value: 2157
- value: 7800
- value: 7900
- value: 11221
- value: 11222
- value: 11223
- value: 46655
- value: 57600
labels:
- name: name
  value: Infinispan Server
- name: version
  value: 14.0.0.CR1
- name: release
  value: 14.0.0.CR1
- name: io.k8s.description
  value: Provides a scalable in-memory distributed database designed for fast access to large volumes of data.
- name: io.k8s.display-name
  value: Infinispan Server
- name: io.openshift.expose-services
  value: 8080:http
- name: io.openshift.tags
  value: datagrid,java,jboss,xpaas
- name: io.openshift.s2i.scripts-url
  value: image:///usr/local/s2i
envs:
- name: ISPN_HOME
  value: /opt/infinispan
- name: IDENTITIES_BATCH
  description: The path to the cli batch file used to create user identities.
- name: USER
  description: When provided with the PASS variable, this value is used to generate a credential identitiy in a yaml file which is used to set IDENTITIES_PATH
- name: PASS
  description: When provided with the USER variable, this value is used to generate a credential identitiy in a yaml file which is used to set IDENTITIES_PATH
- name: JAVA_HOME
  value: /usr/lib/jvm/jre
  description: Workaround for issue with openjdk-runtime image where JAVA_HOME is wrongly set to /usr/lib/jvm/java-11
- name: JAVA_OPTIONS
  description: Allows java properties and options to be provided to the JVM when the server is launched.
- name: SERVER_LIBS
  description: A list of artifacts to install in the server lib directory.
modules:
  repositories:
  - path: modules
  install:
  - name: org.infinispan.dependencies.jdk.common
  - name: org.infinispan.dependencies
    version: infinispan
  - name: org.infinispan.distribution
    version: jvm
  - name: org.infinispan.runtime
run:
  entrypoint:
  - ./bin/launch.sh
  user: 185
  workdir: /opt/infinispan
